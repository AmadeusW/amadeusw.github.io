<!doctype html><html lang=en><head><title>Amadeus' page</title>
<link rel=stylesheet href=//amadeusw.com//css/style.css><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Personal website of Amadeusz Wieczorek about projects, travel and programming."></head><body><header id=title><a href=//amadeusw.com/><h2>Amadeusz Wieczorek</h2></a></header><article class=tech><header id=postheader class=accent_tech><ul id=breadcrumbs><li><a href=/tech/>Tech notes</a> ▹</li><li><a href=/tech/dotnet/>.net</a> ▹</li><li><strong><a href=/tech/dotnet/universal-app-animated-navigation/>Animated navigation in Universal Apps</a></strong></li></ul></header><main><p>Let&rsquo;s explore different ways to animate the navigation across Frames in an Universal App.
These animations are called Transitions, and UWP provides a few kinds to choose from.</p><p><img src=//amadeusw.com//techBlogData//animated-navigation-universal-app/animation.png alt="banner image"></p><p>We will see how easy it is to create a <a href=#directional-animation>transition coming out from and going back to a left edge</a> of the screen. With some extra code, we will create <a href=#continuous-swiping-animation>transitions that look like continuous scrolling</a> in one direction. Finally, we will see <a href=#demo-of-all-transitions>demo videos</a> of all transitions.</p><p><a href=https://github.com/AmadeusW/xaml-page-transitions>Explore the source code</a> and run the demo app yourself!</p><h1 id=basic-transition>Basic transition</h1><p>To add an animated transition to your page, just pass in a type of the transition to <code>Page.Transitions</code>.
UWP invokes the animation behind the scenes when you&rsquo;re navigating to and from the page.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#75715e>&lt;!-- &lt;Page --&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;Page.Transitions&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;TransitionCollection&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;EntranceThemeTransition</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;/TransitionCollection&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/Page.Transitions&gt;</span>
</span></span></code></pre></div><p>UWP provides a few implementations of <code>Windows.UI.Xaml.Media.Animation.Transition</code> that you can plug into <code>TransitionCollection</code>.
Some implementations are more suitable for page navigation than others, and some of them allow you to pass in a parameter that further customizes the behavior.
You can <a href=#demo-of-all-transitions>see all implementations</a> below.</p><h1 id=directional-animation>Directional animation</h1><p>If a page always comes out from one edge and returns there afterwards, it&rsquo;s the easiest to pass in transition&rsquo;s parameters through xaml.</p><p>Here, the red popup page uses <code>EdgeUIThemeTransition</code> associated with the <strong>left edge</strong>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;Page.Transitions&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;TransitionCollection&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;EdgeUIThemeTransition</span> <span style=color:#a6e22e>Edge=</span><span style=color:#e6db74>&#34;Left&#34;</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/TransitionCollection&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/Page.Transitions&gt;</span>
</span></span></code></pre></div><p>Some transitions play exceptionally nice with others. Here, we are navigating between <code>PaneThemeTransition</code> and <code>EdgeUIThemeTransition</code> in the popup.</p><h1 id=continuous-swiping-animation>Continuous swiping animation</h1><p>Transitions are not aware of direction of navigation. You can pass in a parameter into the <code>Navigate</code> method which you can later access in <code>OnNavigatedTo</code> and <code>OnNavigatingFrom</code> methods.</p><p>To implement <strong>scrolling</strong> in the same direction for both <strong>to</strong> and <strong>from</strong> animations, you will need to inverese the direction of one of the animations.</p><p>First, pass in an optional parameter to the <code>Navigate</code> method to indicate the animation direction.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span><span style=color:#75715e>// In the navigation logic</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>bool</span> navigatingRight = <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>Frame rootFrame = Window.Current.Content <span style=color:#66d9ef>as</span> Frame;
</span></span><span style=display:flex><span>rootFrame.Navigate(<span style=color:#66d9ef>typeof</span>(MyView), parameter: navigatingRight);
</span></span></code></pre></div><p>Now, add code that adjusts the transition&rsquo;s property just before the animation plays.</p><p><strong>Notice</strong> that properties in <strong>from</strong> animation are opposites of these in <strong>to</strong> animation.
This way, the page won&rsquo;t return to its initial position, but will simulate animation in one direction.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span><span style=color:#75715e>// in MyView.xaml.cs</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>sealed</span> <span style=color:#66d9ef>partial</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>MyView</span> : Page
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>protected</span> <span style=color:#66d9ef>override</span> <span style=color:#66d9ef>void</span> OnNavigatedTo(NavigationEventArgs e)
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (!(e.Parameter <span style=color:#66d9ef>is</span> <span style=color:#66d9ef>bool</span>))
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span>;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>bool</span> navigatingRight = (<span style=color:#66d9ef>bool</span>)e.Parameter;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        EntranceAnimation.FromHorizontalOffset = navigatingRight ? <span style=color:#ae81ff>300</span> : -<span style=color:#ae81ff>300</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>protected</span> <span style=color:#66d9ef>override</span> <span style=color:#66d9ef>void</span> OnNavigatingFrom(NavigatingCancelEventArgs e)
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (!(e.Parameter <span style=color:#66d9ef>is</span> <span style=color:#66d9ef>bool</span>))
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span>;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>bool</span> navigatingRight = (<span style=color:#66d9ef>bool</span>)e.Parameter;
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        EntranceAnimation.FromHorizontalOffset = navigatingRight ? -<span style=color:#ae81ff>300</span> : <span style=color:#ae81ff>300</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Finally, give a name to the transition, so that you can access it from the C# code.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#75715e>&lt;!-- in MyView.xaml --&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;EntranceThemeTransition</span> <span style=color:#a6e22e>x:Name=</span><span style=color:#e6db74>&#34;EntranceAnimation&#34;</span> <span style=color:#f92672>/&gt;</span>
</span></span></code></pre></div><p>or use it without the name:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span><span style=color:#75715e>// in MyView.xaml.cs</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> entranceAnimation = <span style=color:#66d9ef>this</span>.Transitions.FirstOrDefault() <span style=color:#66d9ef>as</span> EntranceThemeTransition;
</span></span><span style=display:flex><span>    entranceAnimation.FromHorizontalOffset = navigatingRight ? -<span style=color:#ae81ff>300</span> : <span style=color:#ae81ff>300</span>;
</span></span></code></pre></div><p>Voilà!</p><p>All screen captures that demonstrate navigation left and right use this code.</p><h1 id=demo-of-all-transitions>Demo of all transitions</h1><p>Check out <a href=https://github.com/AmadeusW/xaml-page-transitions>the source code</a> and see the animations in high fidelity.
The code is using reflection to find implementations of <code>Windows.UI.Xaml.Media.Animation.Transition</code></p><p><strong>AddDeleteThemeTransition</strong></p><p><strong>ContentThemeTransition</strong></p><p><strong>EdgeThemeTransition</strong></p><p><strong>EntranceThemeTransition</strong></p><p><strong>PaneThemeTransition</strong></p><p><strong>PopupThemeTransition</strong></p><p><strong>ReorderThemeTransition</strong></p><p><strong>RepositionThemeTransition</strong></p><p><strong>NavigationThemeTransition</strong></p><p>Cheers!</p></main></article><footer><span><a href=/about/>//AW</a></span>
<span><a href=#>Scroll to top</a></span></footer></body></html>