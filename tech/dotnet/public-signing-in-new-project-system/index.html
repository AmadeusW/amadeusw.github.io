<!doctype html><html lang=en><head><title>Amadeus' page</title><link rel=stylesheet href=//amadeusw.com/css/style.css><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Personal website of Amadeusz Wieczorek about projects, travel and programming."></head><body><header id=title><a href=//amadeusw.com><h2>Amadeusz Wieczorek</h2></a></header><article class=tech><header id=postheader class=accent_tech><h3>Publicly signing assemblies in the Common Project System</h3></header><main><p>I ran into an obscure error that wasn&rsquo;t discussed on the internet yet, so I thought I&rsquo;d share what I found out.</p><p>My team is lucky to migrate to the <a href=https://github.com/dotnet/project-system>new Project System</a> which significantly simplifies the .csproj files and the overall infrastructure. We also have to sign our assemblies. As the new projecy system uses simpler syntax, we needed to update the directive that signs the code.</p><p>I ran into error CS8102: <code>Public signing was specified and requires a public key, but no public key was specified.</code> I did provide the public key, so what went wrong? I didn&rsquo;t define the <code>SignAssembly</code> property.</p><p>To avoid this error, make sure to define all three boolean properties and provide the key, like so:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;PropertyGroup&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;SignAssembly&gt;</span>true<span style=color:#f92672>&lt;/SignAssembly&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;DelaySign&gt;</span>false<span style=color:#f92672>&lt;/DelaySign&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;PublicSign&gt;</span>true<span style=color:#f92672>&lt;/PublicSign&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;AssemblyOriginatorKeyFile&gt;</span>MyPublicKey.snk<span style=color:#f92672>&lt;/AssemblyOriginatorKeyFile&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/PropertyGroup&gt;</span>
</span></span></code></pre></div><p>FYI, a .snk file with the public key is 160 bytes. <a href=https://blogs.msdn.microsoft.com/kirillosenkov/2014/03/25/sn-exe-cheat-sheet/>This article</a> has commands you&rsquo;ll find useful when working with the key files.</p></main></article><footer><span><a href=/about/>//AW</a></span>
<span><a href=#>Scroll to top</a></span></footer></body></html>