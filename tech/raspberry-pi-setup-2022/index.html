<!doctype html><html><head><title>Amadeus' page</title><link rel=stylesheet href=//amadeusw.com/css/style.css></head><body><div id=container class=centered><header id=title class="containerelement navcontent"><a class=link href=//amadeusw.com><span class=headercontent>Amadeo</span></a></header><div id=subtitle class="accent_tech containerelement navcontent"><span class=headercontent>Headless Raspberry pi setup</span></div><nav class="accent_tech containerelement"><div class=navcontent><a class=link href=/travel/>Travel</a>
<a class=link href=/3dprinting/>3D printing</a>
<a class="link active" href=/tech/>Electronics</a>
<a class=link href=/projects/>Projects</a>
<a class=link href=/cookery/>Cookery</a>
<a class=link href=/dotnet/>.net</a></div></nav><div id=content class=containerelement><main class=centered><article class=tech><p>Setting up Raspberry Pi has changed a bit since when I first used it, and most of search results on the web describe steps applicable to Raspbian versions before Raspbian Bullseye (released in April 2020).</p><p>Specifically, before Raspbian Bullseye you could run <code>ssh pi@raspberrypi</code> and use the default password <code>raspberry</code>. Now, you need to generate the password using <code>openssl</code>.</p><p>Here are the newest (as of 2022) steps needed to get set up a <strong>headless Raspberry pi</strong>, specifically with Raspbian Bullseye (released on April 2020) and later:</p><h1 id=generate-the-password>Generate the password</h1><ul><li>In unix terminal run the following command, using your <code>password</code>:</li></ul><pre tabindex=0><code>$ echo &#39;password&#39; | openssl passwd -6 -stdin
$6$k5M8bJM8sciQg4N4$8STzoHVsSyzdjpzjuUhn6UDhxcbe/JlQB4WUbEBPl/1kIRBd8q3QA.I4h6hGCEdACLgt3ejDQj4qJIxNohOts0
</code></pre><h1 id=setup-the-headless-raspberry-pi>Setup the headless raspberry pi</h1><ul><li>Download <a href=https://www.raspberrypi.com/software/operating-systems/>Raspberry Pi OS Lite</a></li><li>Use <a href=https://www.balena.io/etcher/>Etcher</a>) to flash downloaded .zip onto a MicroSD card</li><li>After flashing, open the FAT partition as folder in your code editor, and:<ul><li>Create file named <code>ssh</code>. Keep it empty.</li><li>Create file named <code>wpa_supplicant.conf</code> and insert, replacing values of <code>ssid</code> and <code>psk</code></li></ul></li></ul><pre tabindex=0><code class=language-wpa_supplicant.conf data-lang=wpa_supplicant.conf>ctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdev
update_config=1
country=US

network={
     ssid=&#34;ssid name&#34;
     psk=&#34;password&#34;
     scan_ssid=1
}
</code></pre><ul><li>Create file named <code>userconf</code> with the following content <code>username:encrypted-password</code>, replacing <code>encrypted-password</code> with the output of the above openssl command.</li></ul><h1 id=first-boot>First boot</h1><ul><li>Insert MicroSD in Raspberry Pi and power it up<ul><li>If you see an error about tampering with fingerprint, open <code>~/.ssh/known-hosts</code> and remove line containing <code>raspberry</code>, that&rsquo;s from another device.</li></ul></li><li>Run <code>sudo raspi-config</code> to configure the hostname, timezone, and other relevant settings.<ul><li>When quitting, you&rsquo;ll be prompted to restart.</li></ul></li><li>When Rapsberry Pi reboots, connect using new hostname, e.g. <code>ssh pi@newhostname</code></li><li>Change password <code>passwd pi</code></li><li>Update sources of available packages <code>sudo apt update</code></li><li>Upgrade installed packages <code>sudo apt full-upgrade</code></li></ul></article></main></div><div id=footer class=containerelement><div id=footerName><abbr title="Pronounce: A-ma-de-ows Vee-cho-reck">Amadeus Wieczorek</abbr></div><div id=footerUnderName>I supercharge your productivity.</div><ul id=footerLinks><li><a href=//github.com/amadeusw>My github</a></li><li><a href=//amadeusw.com/portfolio>2013 portfolio</a></li><li><a href=feed.xml>RSS feed</a></li><li><a href=#>Scroll to top</a></li></div></div></div></body></html>